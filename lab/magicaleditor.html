<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ - Â∞èË™¨ÂÆ£‰ºù„Éù„ÉÉ„Éó„É°„Éº„Ç´„Éº | Kagetica Lab</title>
    <meta property="og:title" content="„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ - Â∞èË™¨ÂÆ£‰ºù„Éù„ÉÉ„Éó„É°„Éº„Ç´„Éº | Kagetica Lab">
    <meta property="og:description" content="24‰∫∫„ÅÆÁ∑®ÈõÜËÄÖ„Ç≠„É£„É© √ó 24Á®Æ„ÅÆ„Éá„Ç∂„Ç§„É≥„Åß„ÄÅ„ÅÇ„Å™„Åü„ÅÆÂ∞èË™¨„ÅÆÂÆ£‰ºùÁîªÂÉè„ÇíÁàÜÈÄüÁîüÊàêÔºÅ">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://kagetica.net/lab/magicaleditor.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@kagetica">
    <link rel="icon" href="../assets/icon.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=Shippori+Mincho:wght@400;500;600;700;800&family=DotGothic16&family=Hachi+Maru+Pop&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { theme: { extend: { colors: { retropink: '#FF6B9D', retroorange: '#FF8E53', retroyellow: '#FFC837', retrocyan: '#00E5FF', retrogreen: '#69F0AE', retropurple: '#B388FF' }, fontFamily: { dot: ['"DotGothic16"', 'sans-serif'], pop: ['"Hachi Maru Pop"', 'cursive'], gothic: ['"Noto Sans JP"', 'sans-serif'], mincho: ['"Shippori Mincho"', 'serif'] } } } }
    </script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            background: linear-gradient(135deg, #FFE0F0 0%, #FFF5E0 50%, #E0F0FF 100%) !important;
            min-height: 100vh
        }

        .retro-border {
            border: 4px solid #000;
            box-shadow: 6px 6px 0 #000
        }

        .retro-border:hover {
            box-shadow: 8px 8px 0 #FF6B9D
        }

        .char-card {
            cursor: pointer;
            transition: all .2s;
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            border-radius: 12px;
            padding: 8px;
            text-align: center
        }

        .char-card:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 #FF6B9D
        }

        .char-card.selected {
            border-color: #FF6B9D;
            box-shadow: 6px 6px 0 #FF6B9D;
            background: linear-gradient(135deg, #FFF0F5, #FFE0EB)
        }

        .design-card {
            cursor: pointer;
            transition: all .2s;
            border: 3px solid #000;
            box-shadow: 3px 3px 0 #000;
            border-radius: 8px;
            padding: 6px;
            text-align: center;
            font-size: 11px
        }

        .design-card:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0 #00E5FF
        }

        .design-card.selected {
            border-color: #00E5FF;
            box-shadow: 5px 5px 0 #00E5FF;
            background: linear-gradient(135deg, #E0FFFF, #E0F5FF)
        }

        .retro-input {
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            border-radius: 8px;
            padding: 10px 14px;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 14px;
            width: 100%;
            outline: none;
            transition: all .2s
        }

        .retro-input:focus {
            border-color: #FF6B9D;
            box-shadow: 4px 4px 0 #FF6B9D
        }

        .retro-btn {
            border: 3px solid #000;
            box-shadow: 4px 4px 0 #000;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 900;
            cursor: pointer;
            transition: all .15s;
            font-family: 'Noto Sans JP', sans-serif
        }

        .retro-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 #000
        }

        .retro-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #000
        }

        .step-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #000;
            color: #FFC837;
            font-weight: 900;
            padding: 4px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-family: 'DotGothic16', sans-serif
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-8px)
            }
        }

        @keyframes sparkle {

            0%,
            100% {
                opacity: 1;
                transform: scale(1)
            }

            50% {
                opacity: .5;
                transform: scale(1.2)
            }
        }

        @keyframes bounce-in {
            0% {
                opacity: 0;
                transform: scale(.3)
            }

            50% {
                transform: scale(1.05)
            }

            70% {
                transform: scale(.9)
            }

            100% {
                opacity: 1;
                transform: scale(1)
            }
        }

        .float-anim {
            animation: float 3s ease-in-out infinite
        }

        .sparkle-anim {
            animation: sparkle 2s ease-in-out infinite
        }

        .bounce-in {
            animation: bounce-in .6s ease
        }

        .checkerboard {
            background-image: linear-gradient(45deg, rgba(0, 0, 0, .05) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, .05) 75%), linear-gradient(45deg, rgba(0, 0, 0, .05) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, .05) 75%);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px
        }

        .dots-pattern {
            background-image: radial-gradient(circle, rgba(0, 0, 0, .08) 1px, transparent 1px);
            background-size: 12px 12px
        }

        .stripe-pattern {
            background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0, 0, 0, .03) 10px, rgba(0, 0, 0, .03) 20px)
        }

        .canvas-wrapper {
            width: 420px;
            height: 600px;
            position: relative;
            overflow: hidden;
            border-radius: 2px;
            box-shadow: 4px 4px 12px rgba(0, 0, 0, 0.15);
        }

        @media(max-width:1280px) {
            .canvas-wrapper {
                width: 360px;
                height: 514px
            }
        }

        @media(max-width:768px) {
            .canvas-wrapper {
                width: 100%;
                aspect-ratio: 7/10;
                height: auto
            }
        }
    </style>
</head>

<body class="loading">
    <canvas id="matrix-canvas"></canvas>
    <div class="sf-toggle" id="sf-toggle"><span class="sf-toggle-icon">SF</span></div>
    <nav id="nav">
        <div class="nav-container">
            <a href="../index.html" class="logo-mark"><img src="../assets/icon.png" alt="Kagetica Icon"></a>
            <div class="nav-links">
                <a href="../index.html" class="vertical-text">Top</a>
                <a href="../profile.html" class="vertical-text">Profile</a>
                <a href="../news.html" class="vertical-text">News</a>
                <a href="../works.html" class="vertical-text active">Works</a>
                <a href="../schedule.html" class="vertical-text">Schedule</a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSdXy8Z_p6V_h1B4Zc6mX7VfW6zY8v-J5z1zQ8P_z6-lq6q9g/viewform"
                    target="_blank" class="vertical-text">Contact</a>
            </div>
        </div>
    </nav>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useCallback } = React;
        const CHARACTERS = [
            { id: 1, name: 'ÊÅã„Åô„Çã‰πôÂ•≥„ÇÆ„É£„É´', emoji: 'üíñ', bg: 'from-pink-300 to-rose-200', text: 'text-rose-950', boxBg: 'bg-white/80', defaultQuote: 'Â∞ä„Åô„Åé„Å¶ÁÑ°ÁêÜ‚Ä¶ÂÖ®Âì°Ë™≠„Çì„ÅßÔºÅ', tweet: '„Å°„Çá„Å£„Å®ÂæÖ„Å£„Å¶„ÄÅÂ∞ä„Åô„Åé„Å¶ÁÑ°ÁêÜ‚Ä¶üò≠ÂÖ®‰∫∫È°û„ÄÅ„Åì„ÅÆÊ≤º„Å´„Éè„Éû„Å£„Å¶ÔºÅÔºÅ', tags: '#ÊÅãÊÑõÂ∞èË™¨ #„É©„Éñ„Ç≥„É°' },
            { id: 13, name: '„ÉÑ„É≥„Éá„É¨ÂπºÈ¶¥Êüì', emoji: 'üéÄ', bg: 'from-red-200 to-rose-300', text: 'text-red-950', boxBg: 'bg-white/90', defaultQuote: '„Åπ„ÄÅÂà•„Å´„ÅÇ„Çì„Åü„ÅÆÂ∞èË™¨„Å™„Çì„Å¶Ë™≠„Çì„Åß„Å™„ÅÑ„Çì„Å†„Åã„Çâ„Å≠ÔºÅ', tweet: '„Åπ„ÄÅÂà•„Å´„ÅÇ„Çì„Åü„ÅÆÂ∞èË™¨„Å™„Çì„Å¶Ë™≠„Çì„Åß„Å™„ÅÑ„Çì„Å†„Åã„Çâ„Å≠ÔºÅ‚Ä¶„Åß„ÇÇ„ÄÅÊ¨°„ÅØ„ÅÑ„Å§Êõ¥Êñ∞„Åô„Çã„ÅÆÔºü///', tags: '#ÈùíÊò• #„É©„Éñ„Ç≥„É° #„ÉÑ„É≥„Éá„É¨' },
            { id: 14, name: '„ÇÜ„Çã„Åµ„Çè„ÅäÂßâ„Åï„Çì', emoji: 'üå∏', bg: 'from-rose-100 to-pink-100', text: 'text-rose-800', boxBg: 'bg-white/90', defaultQuote: '„ÅØ„Çè„Çè‚Ä¶Â∞ä„Åô„Åé„Å¶„ÅäËå∂„Åì„Åº„Åó„Å°„ÇÉ„ÅÑ„Åæ„Åó„Åü„ÅÅ', tweet: '„ÅØ„Çè„Çè‚Ä¶Â∞ä„Åô„Åé„Å¶„ÅäËå∂„Åì„Åº„Åó„Å°„ÇÉ„ÅÑ„Åæ„Åó„Åü„ÅÅüçµ ÂøÉ„Åå„Éù„Ç´„Éù„Ç´„Åô„Çã„ÄÅ„Å®„Å£„Å¶„ÇÇÁ¥†Êïµ„Å™„ÅäË©±„Åß„Åô‚ú®', tags: '#ÁôæÂêà #Êó•Â∏∏ #Áôí„ÇÑ„Åó' },
            { id: 2, name: 'ÂêçÊé¢ÂÅµ„ÅÆÂºüÂ≠ê', emoji: 'üïµÔ∏è', bg: 'from-slate-300 to-gray-300', text: 'text-slate-900', boxBg: 'bg-white/80', defaultQuote: '„Åì„ÅÆ„Éà„É™„ÉÉ„ÇØ„ÄÅË¶ãÁ†¥„Çå„Åæ„Åô„ÅãÔºü', tweet: 'ÂÖàÁîü„ÄÅ„Å®„Çì„Åß„ÇÇ„Å™„ÅÑ‰∫ã‰ª∂„ÇíË¶ã„Å§„Åë„Åæ„Åó„Åü„ÄÇ„Åì„ÅÆË¨é„ÄÅËß£„Åë„Åæ„Åô„ÅãÔºüüïµÔ∏è', tags: '#„Éü„Çπ„ÉÜ„É™ #Ë™≠Êõ∏Â•Ω„Åç„Å®Áπã„Åå„Çä„Åü„ÅÑ' },
            { id: 3, name: '„ÅäÂåñ„Åë„ÅÆQ„Å°„ÇÉ„Çì', emoji: 'üëª', bg: 'from-purple-500 to-indigo-600', text: 'text-white', boxBg: 'bg-black/40', defaultQuote: '„Éí„Éí„Éí‚Ä¶‰ªäÂ§ú„ÅØÁú†„Çå„Å™„ÅÑ„Å≠„Åá', tweet: '„Éí„Éí„Éí‚Ä¶‰ªäÂ§ú„ÅØÁú†„Çâ„Åõ„Å™„ÅÑ„Çà„Åâ‚Ä¶üëªÊÄñ„ÅÑ„ÅÆ„ÅåÂ•Ω„Åç„Å™Â≠ê„ÄÅÂØÑ„Å£„Å®„ÅÑ„Åß‚Ä¶‚Ä¶', tags: '#„Éõ„É©„ÉºÂ∞èË™¨ #ÊÄ™Ë´á' },
            { id: 8, name: 'Ë£èÁ§æ‰ºö„ÅÆÈ°îÂΩπ', emoji: 'üç∑', bg: 'from-zinc-900 to-gray-800', text: 'text-gray-100', boxBg: 'bg-black/60 border border-red-900', defaultQuote: '„ÇØ„ÇØ„ÇØ‚Ä¶„Åì„ÅÜ„ÅÑ„ÅÜÁµ∂Êúõ„ÇíÂæÖ„Å£„Å¶„ÅÑ„Åü', tweet: '„ÇØ„ÇØ„ÇØ‚Ä¶‚Ä¶Áæé„Åó„ÅÑÁµ∂Êúõ„Å†„ÄÇÁîò„ÅÑÁâ©Ë™û„Å´È£Ω„Åç„ÅüÂ•¥„ÅØ„ÄÅ„Åì„Åì„Å∏Êù•„ÅÑüç∑', tags: '#„ÉÄ„Éº„ÇØ„Éï„Ç°„É≥„Çø„Ç∏„Éº #„Ç¢„É≥„Ç∞„É©' },
            { id: 18, name: 'ÊØíËàå„É°„Ç§„Éâ', emoji: 'üßπ', bg: 'from-slate-800 to-slate-900', text: 'text-slate-100', boxBg: 'bg-black/60 border border-slate-500', defaultQuote: '‚Ä¶„Åµ„Çì„ÄÅÂ∞ë„Åó„ÅØ„Éû„Ç∑„Å™ÊñáÁ´†„ÅåÊõ∏„Åë„Çã„Çà„ÅÜ„Åß„Åô„Å≠', tweet: '‚Ä¶„Åµ„Çì„ÄÅÂ∞ë„Åó„ÅØ„Éû„Ç∑„Å™ÊñáÁ´†„ÅåÊõ∏„Åë„Çã„Çà„ÅÜ„Åß„Åô„Å≠„ÄÇ‰ªïÊñπ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÅÁßÅ„ÅåÁöÜÊßò„Å´„ÅäÂãß„ÇÅ„Åó„Å¶„ÅÇ„Åí„Åæ„Åó„Çá„ÅÜüßπ', tags: '#„Ç¢„É≥„ÉÅ„Éí„Éº„É≠„Éº #„ÉÄ„Éº„ÇØ„Ç≥„É°„Éá„Ç£' },
            { id: 7, name: 'ÁÜ±Ë°ÄÂãáËÄÖ', emoji: 'üî•', bg: 'from-red-500 to-orange-400', text: 'text-white', boxBg: 'bg-white/20', defaultQuote: '„ÅÜ„Åä„ÅäÔºÅ„Åì„Åì„Åã„Çâ„ÅåÊøÄ„Ç¢„ÉÑ„Å†„ÅúÔºÅ', tweet: '„ÅÜ„Åä„Åä„Åä„ÅäÔºÅËÉ∏„ÅåÁÜ±„Åè„Å™„ÇãÂ±ïÈñã„Ç≠„Çø„Ç≥„É¨ÔºÅÁµ∂ÂØæË™≠„Çì„Åß„Åè„Çå„Çà„Å™ÔºÅüî•', tags: '#„Ç¢„ÇØ„Ç∑„Éß„É≥ #„Éê„Éà„É´' },
            { id: 19, name: 'Ê≠¥Êà¶„ÅÆÂÇ≠ÂÖµ', emoji: '‚öîÔ∏è', bg: 'from-amber-700 to-orange-900', text: 'text-amber-50', boxBg: 'bg-black/50 border border-amber-600', defaultQuote: '„ÅÑ„ÅÑÁõÆ„Çí„Åó„Å¶„ÇÑ„Åå„Çã„ÄÇ‰ø∫„ÅÆËÉå‰∏≠„ÅØÈ†ê„Åë„Åü„Åú', tweet: '„ÅÑ„ÅÑÁõÆ„Çí„Åó„Å¶„ÇÑ„Åå„Çã„ÄÇ‰ø∫„ÅÆËÉå‰∏≠„ÅØ„ÅäÂâç„ÅÆÁâ©Ë™û„Å´È†ê„Åë„Åü„Åú„ÄÇÁîü„ÅçÊÆã„Çä„Åü„Åç„ÇÉ„ÄÅ„Åì„Çå„ÇíË™≠„ÇÅ‚öîÔ∏è', tags: '#„Éü„É™„Çø„É™„Éº #„Çµ„Éê„Ç§„Éê„É´ #„Éè„Éº„Éâ„Éú„Ç§„É´„Éâ' },
            { id: 4, name: '„Ç®„É´„Éï„ÅÆË≥¢ËÄÖ', emoji: 'üßù‚Äç‚ôÄÔ∏è', bg: 'from-emerald-400 to-teal-200', text: 'text-teal-950', boxBg: 'bg-white/80', defaultQuote: '‰πÖ„ÄÖ„Å´È≠Ç„ÅåÈúá„Åà„ÇãÁâ©Ë™û„Åò„ÇÉ', tweet: 'Èï∑„ÅçÊôÇ„ÇíÁîü„Åç„ÇãÊàë„Åß„ÇÇ„ÄÅ„Åì„Çå„Åª„Å©„ÅÆÁâ©Ë™û„Å´„ÅØÊªÖÂ§ö„Å´Âá∫‰ºö„Åà„Å¨„ÄÇÂàÆÁõÆ„Åõ„Çàüßù‚Äç‚ôÄÔ∏è', tags: '#„Éï„Ç°„É≥„Çø„Ç∏„Éº #Áï∞‰∏ñÁïå' },
            { id: 15, name: 'Â§©‰Ωø„ÅÆÂè∏Êõ∏', emoji: 'üëº', bg: 'from-sky-100 to-blue-200', text: 'text-sky-900', boxBg: 'bg-white/90', defaultQuote: 'Â§©Áïå„ÅÆÂõ≥Êõ∏È§®„Å´„ÇÇ„ÄÅ„Åú„Å≤ÂèéËîµ„Åó„Åü„ÅÑ‰∏ÄÂÜä„Åß„Åô', tweet: 'Â§©Áïå„ÅÆÂõ≥Êõ∏È§®„Å´„ÇÇ„ÄÅ„Åú„Å≤ÂèéËîµ„Åó„Åü„ÅÑ‰∏ÄÂÜä„Åß„Åôüìñ ÊæÑ„ÅøÂàá„Å£„Åü‰∏ñÁïåË¶≥„Å´ÂøÉ„ÅåÊ¥ó„Çè„Çå„Åæ„Åô„Çà„ÄÇ', tags: '#„Éè„Ç§„Éï„Ç°„É≥„Çø„Ç∏„Éº #Á•ûË©±' },
            { id: 5, name: 'Êú™Êù•ÂûãAI„É≠„Éú', emoji: 'ü§ñ', bg: 'from-cyan-400 to-blue-500', text: 'text-white', boxBg: 'bg-black/50 border border-cyan-300', defaultQuote: 'Ëß£ÊûêÂÆå‰∫Ü„ÄÇÊé®Â•®Â∫¶„ÄÅÊ∏¨ÂÆö‰∏çËÉΩ', tweet: '„ÄêËß£ÊûêÂÆå‰∫Ü„ÄëÊú¨‰ΩúÂìÅ„ÉéÊé®Â•®Â∫¶„ÄÅË®àÊ∏¨‰∏çËÉΩ„ÄÇÁõ¥„ÉÅ„Éã „Ç¢„ÇØ„Çª„Çπ„É≤ Êé®Â•®„Ç∑„Éû„Çπ„ÄÇü§ñ‚ö°', tags: '#SF #„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ' },
            { id: 16, name: 'ÁãÇÊ∞ó„ÅÆÁßëÂ≠¶ËÄÖ', emoji: 'üß™', bg: 'from-lime-300 to-green-500', text: 'text-green-950', boxBg: 'bg-white/80 border border-lime-500', defaultQuote: '„ÇØ„Éè„ÉèÔºÅ„Åì„ÅÆË®≠ÂÆö„ÄÅÁßÅ„ÅÆÁêÜË´ñ„ÇíÂáåÈßï„Åó„Å¶„ÅÑ„ÇãÔºÅ', tweet: '„ÇØ„Éè„Éè„ÉèÔºÅË¶ã‰∫ã„Å†ÔºÅ„Åì„ÅÆË®≠ÂÆö„ÅÆÁ∑ªÂØÜ„Åï„ÄÅÁßÅ„ÅÆÁêÜË´ñ„Åô„ÇâÂáåÈßï„Åó„Å¶„ÅÑ„Çã„ÅûÔºÅüß™‚ú®', tags: '#SF #„Éè„Éº„ÉâSF #ÁßëÂ≠¶' },
            { id: 17, name: 'ÂÆáÂÆô„Åã„Çâ„ÅÆË®™ÂïèËÄÖ', emoji: 'üëΩ', bg: 'from-violet-500 to-fuchsia-600', text: 'text-white', boxBg: 'bg-black/40 border border-fuchsia-400', defaultQuote: '„ÉØ„É¨„ÉØ„É¨„ÉéÊòü„Éã„É¢„ÄÅ„Ç≥„É¨„Éõ„Éâ„ÉéÁâ©Ë™û„Éè Â≠òÂú®„Ç∑„Éä„Ç§', tweet: '„ÉØ„É¨„ÉØ„É¨„ÉéÊòü„Éã„É¢„ÄÅ„Ç≥„É¨„Éõ„Éâ„ÉéÁâ©Ë™û„Éè Â≠òÂú®„Ç∑„Éä„Ç§üëΩ „ÉÅ„Ç≠„É•„Ç¶„Ç∏„É≥„ÄÅ„Ç™„ÇΩ„É´„Éô„Ç∑„ÄÇ', tags: '#‰∏çÊù°ÁêÜ #ÂÆáÂÆô #SF' },
            { id: 9, name: 'Áôí„ÇÑ„Åó„ÅÆÊü¥Áä¨', emoji: 'üêæ', bg: 'from-orange-200 to-yellow-100', text: 'text-orange-950', boxBg: 'bg-white/80', defaultQuote: 'Ë™≠„ÇÄ„Å®ÂøÉ„Åå„Éù„Ç´„Éù„Ç´„Åô„Çã„ÉØ„É≥', tweet: '„ÉØ„É≥ÔºÅüêæÔºàÁñ≤„Çå„Åü„Å®„Åç„ÅØ„ÄÅ„Åì„ÅÆ„ÅäË©±„ÇíË™≠„Çì„Åß„Åª„Å£„Åì„Çä„Åô„Çã„ÉØ„É≥ÔºÅÔºâ', tags: '#Êó•Â∏∏ #„Åª„ÅÆ„Åº„ÅÆ' },
            { id: 11, name: 'ÈôΩÊ∞ó„Å™„Éî„Ç®„É≠', emoji: 'üéà', bg: 'from-yellow-400 to-red-400', text: 'text-red-950', boxBg: 'bg-white/90', defaultQuote: '„ÅÇ„ÅØ„ÅØÔºÅ„ÅäËÖπÁóõ„ÅÑÔºÅÊúÄÈ´òÂÇë‰ΩúÔºÅ', tweet: '„Ç¢„Éè„Éè„ÉèÔºÅü§£„ÅäËÖπÁóõ„ÅÑÔºÅÁ¨ë„ÅÑ„Åü„ÅÑÂ•¥„ÅØÁµ∂ÂØæ„Å´„Åì„ÇåË™≠„ÇÄ„Åπ„Åç„Å†„ÇàÔºÅüéà', tags: '#„Ç≥„É°„Éá„Ç£ #„ÇÆ„É£„Ç∞' },
            { id: 10, name: '„Éê„Éº„ÅÆ„Éû„Çπ„Çø„Éº', emoji: 'üç∏', bg: 'from-indigo-950 to-blue-900', text: 'text-blue-50', boxBg: 'bg-white/10 backdrop-blur-md', defaultQuote: '‰ªäÂ§ú„ÅØ„ÄÅ„Åì„ÅÆÁâ©Ë™û„Å´ÈÖî„ÅÑ„Åæ„Åõ„Çì„Åã', tweet: '„ÅäÁñ≤„ÇåÊßò„Åß„Åô„ÄÇ‰ªäÂ§ú„ÅØ„ÄÅ„Åì„ÅÆÊ•µ‰∏ä„ÅÆÁâ©Ë™û„ÅßÈùô„Åã„Å´ÈÖî„ÅÑ„Åó„Çå„Åæ„Åõ„Çì„ÅãÔºüü•É', tags: '#‰∫∫Èñì„Éâ„É©„Éû #Áèæ‰ª£Âäá' },
            { id: 6, name: 'ÊòéÊ≤ª„ÅÆÊñáË±™ÂπΩÈúä', emoji: 'üñãÔ∏è', bg: 'from-amber-200 to-orange-100', text: 'text-amber-950', boxBg: 'bg-white/70 border border-amber-300', defaultQuote: '„Åµ„ÇÄ„ÄÅÊÇ™„Åè„Å™„ÅÑ„ÄÇÁ≠ÜËá¥„Å´Âë≥„Åå„ÅÇ„Çã', tweet: '„Åµ„ÇÄ‚Ä¶‚Ä¶ÂÆü„Å´ËààË∂£„ÅåÂ∞Ω„Åç„Å¨„ÄÇÈ≠Ç„ÇíÂâä„Å£„Å¶Êõ∏„Åã„Çå„ÅüÊñáÂ≠ó„Å´„ÅØÁÜ±„ÅåÂÆø„Çã„ÇÇ„ÅÆ„Å†üñãÔ∏è', tags: '#Á¥îÊñáÂ≠¶ #Ê≠¥Âè≤Â∞èË™¨' },
            { id: 20, name: '„Éê„É™„Ç≠„É£„É™Á∑®ÈõÜÈï∑', emoji: 'üë©‚Äçüíº', bg: 'from-blue-100 to-indigo-100', text: 'text-indigo-900', boxBg: 'bg-white/90 border border-blue-200', defaultQuote: 'ÂúßÂÄíÁöÑ„Å™ÁÜ±Èáè„ÄÇ‰ªä„Åô„Åê‰ºÅÁîªÊõ∏„ÇíÈÄö„Åó„Åü„ÅÑ„Çè', tweet: 'ÂúßÂÄíÁöÑ„Å™ÁÜ±Èáè„ÄÇ‰ªä„Åô„Åê‰ºÅÁîªÊõ∏„ÇíÈÄö„Åó„Å¶Êõ∏Á±çÂåñ„Åó„Åü„ÅÑ„É¨„Éô„É´„ÅÆ‰ΩúÂìÅ„Çà„ÄÇÂøÖË™≠„Åß„Åôüë©‚Äçüíº‚ú®', tags: '#„Åä‰ªï‰∫ãÂ∞èË™¨ #„Éì„Ç∏„Éç„Çπ #ÂøÖË™≠' },
            { id: 21, name: 'ÊïèËÖï„Éó„É≠„Éá„É•„Éº„Çµ„Éº', emoji: 'üï∂Ô∏è', bg: 'from-gray-300 to-gray-400', text: 'text-gray-900', boxBg: 'bg-white/80', defaultQuote: 'Â£≤„Çå„ÇãÂåÇ„ÅÑ„Åå„Åô„Çã„ÄÇÁßÅ„Åå„Éó„É≠„Éá„É•„Éº„Çπ„Åó„Çà„ÅÜ', tweet: 'Â£≤„Çå„ÇãÂåÇ„ÅÑ„Åå„Åô„Çã„Å≠„ÄÇÁßÅ„Åå„Éó„É≠„Éá„É•„Éº„Çπ„Åó„Å¶„ÄÅ‰∏ñÁïå„Å´Ë¶ã„Åõ„Å§„Åë„Å¶„ÇÑ„Çç„ÅÜüï∂Ô∏èüí∏', tags: '#„Ç®„É≥„Çø„É° #Ë©±È°å‰Ωú' },
            { id: 22, name: '„Éô„ÉÜ„É©„É≥Êõ∏Ë©ïÂÆ∂', emoji: '‚òï', bg: 'from-stone-200 to-stone-400', text: 'text-stone-900', boxBg: 'bg-stone-50/90', defaultQuote: 'ËøëÂπ¥Á®Ä„Å´Ë¶ã„ÇãÂÇë‰Ωú„ÄÇË™≠Êõ∏„ÅÆÈÜçÈÜêÂë≥„Åå„Åì„Åì„Å´„ÅÇ„Çã', tweet: 'ËøëÂπ¥Á®Ä„Å´Ë¶ã„ÇãÂÇë‰Ωú„ÄÇË®ÄËëâ„ÅÆÁ´Ø„ÄÖ„Åã„Çâ„ÄÅË™≠Êõ∏„ÅÆÈÜçÈÜêÂë≥„ÇíÊ∑±„ÅèÂë≥„Çè„Åà„Çã‰∏ÄÂÜä„Åß„Åô‚òïüìñ', tags: '#Êõ∏Ë©ï #Ë™≠Êõ∏Ë®òÈå≤ #Âêç‰Ωú' },
            { id: 23, name: 'ÈÅãÂëΩ„ÅÆÂç†„ÅÑÂ∏´', emoji: 'üîÆ', bg: 'from-purple-900 to-indigo-900', text: 'text-purple-100', boxBg: 'bg-black/50 border border-purple-500', defaultQuote: 'Ë¶ã„Åà„Åæ„Åô‚Ä¶„Åì„ÅÆ‰ΩúÂìÅ„Åå‰∏ñÁïå„ÇíÂ∏≠Â∑ª„Åô„ÇãÊú™Êù•„Åå‚Ä¶', tweet: 'Ë¶ã„Åà„Åæ„Åô‚Ä¶„Åì„ÅÆ‰ΩúÂìÅ„ÅåÂ§ö„Åè„ÅÆ‰∫∫„ÅÆÂøÉ„ÇíÊâì„Å°„ÄÅ‰∏ñÁïå„ÇíÂ∏≠Â∑ª„Åô„ÇãÊú™Êù•„Åå‚Ä¶üîÆ‚ú®', tags: '#„Çπ„Éî„É™„ÉÅ„É•„Ç¢„É´ #ÈÅãÂëΩ„ÅÆÂá∫‰ºö„ÅÑ' },
            { id: 24, name: '„Ç∑„É≥„Éó„É´„Å™ÈªíÁå´', emoji: 'üêà‚Äç‚¨õ', bg: 'from-gray-100 to-gray-200', text: 'text-gray-900', boxBg: 'bg-white/90 shadow-sm', defaultQuote: '„Éã„É£„Éº„ÄÇÔºà„Å®„Çä„ÅÇ„Åà„ÅöË™≠„Çì„Åß„Åø„Åü„ÇâÔºüÔºâ', tweet: '„Éã„É£„ÉºüêæÔºàÂõõ„ÅÆ‰∫î„ÅÆË®Ä„Çè„Åö„Å´„ÄÅ„Å®„Çä„ÅÇ„Åà„ÅöË™≠„Çì„Åß„Åø„Åü„ÇâÔºüÈù¢ÁôΩ„ÅÑ„Åã„ÇâÔºâ', tags: '#„Åä„Åô„Åô„ÇÅÂ∞èË™¨ #Ë™≠Êõ∏' },
            { id: 12, name: '„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ', emoji: 'üßô‚Äç‚ôÄÔ∏è', bg: 'from-fuchsia-400 to-pink-400', text: 'text-white', boxBg: 'bg-white/30 backdrop-blur-md', defaultQuote: '„Ç∏„É£„É≥„É´„Å™„Çì„Å¶Èñ¢‰øÇ„Å™„ÅÑ„ÄÅÈù¢ÁôΩ„ÅÑÔºÅ', tweet: 'Ë¶ã„Å§„Åë„Å°„ÇÉ„ÅÑ„Åæ„Åó„ÅüÔºÅ„Ç∏„É£„É≥„É´„ÅÆÂ£Å„ÇíË∂Ö„Åà„Çã„ÄÅÂúßÂÄíÁöÑ„Å™„ÄåÈù¢ÁôΩ„Åï„Äç„ÇíÔºÅ‚ú®', tags: '#„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ #Â∞èË™¨Á¥π‰ªã' }
        ];

        const DESIGNS = [
            { id: 1, name: '„Éù„ÉÉ„Éó‚òÜ„Çπ„Çø„Éº', emoji: '‚≠ê', pattern: 'checkerboard', titleStyle: 'font-pop text-3xl', accentColor: '#FF6B9D', cornerDeco: 'stars', bgExtra: 'bg-gradient-to-br' },
            { id: 2, name: '„Éç„Ç™„É≥„Éä„Ç§„Éà', emoji: 'üåÉ', pattern: 'none', titleStyle: 'font-gothic font-black text-3xl tracking-tight', accentColor: '#00E5FF', cornerDeco: 'neon-border', bgExtra: 'bg-gradient-to-b' },
            { id: 3, name: '„É¨„Éà„É≠„Ç≤„Éº„É†', emoji: 'üéÆ', pattern: 'dots-pattern', titleStyle: 'font-dot text-2xl', accentColor: '#69F0AE', cornerDeco: 'pixel', bgExtra: 'bg-gradient-to-br' },
            { id: 4, name: 'Âíå„É¢„ÉÄ„É≥', emoji: 'üéã', pattern: 'none', titleStyle: 'font-mincho text-3xl font-bold', accentColor: '#D4A574', cornerDeco: 'washi', bgExtra: 'bg-gradient-to-b' },
            { id: 5, name: '„Éû„Ç¨„Ç∏„É≥È¢®', emoji: 'üì∞', pattern: 'none', titleStyle: 'font-gothic font-black text-4xl italic', accentColor: '#FF0050', cornerDeco: 'magazine', bgExtra: 'bg-gradient-to-br' },
            { id: 6, name: '„Éë„Çπ„ÉÜ„É´„Éâ„É™„Éº„É†', emoji: 'ü¶Ñ', pattern: 'dots-pattern', titleStyle: 'font-pop text-3xl', accentColor: '#C8A2FF', cornerDeco: 'pastel-cloud', bgExtra: 'bg-gradient-to-br' },
            { id: 7, name: '„ÉÄ„Éº„ÇØÔºÜ„Ç®„ÉÉ„Ç∏', emoji: 'üñ§', pattern: 'stripe-pattern', titleStyle: 'font-gothic font-black text-3xl uppercase', accentColor: '#FF2D55', cornerDeco: 'edge', bgExtra: 'bg-gradient-to-b' },
            { id: 8, name: '„Ç≠„É•„Éº„Éà„É™„Éú„É≥', emoji: 'üéÄ', pattern: 'checkerboard', titleStyle: 'font-pop text-2xl', accentColor: '#FF69B4', cornerDeco: 'ribbon', bgExtra: 'bg-gradient-to-br' },
            { id: 9, name: '„Ç≥„Ç∫„Éü„ÉÉ„ÇØ', emoji: 'üåå', pattern: 'none', titleStyle: 'font-gothic font-bold text-3xl', accentColor: '#7C4DFF', cornerDeco: 'cosmic', bgExtra: 'bg-gradient-to-b' },
            { id: 10, name: '„É¥„Ç£„É≥„ÉÜ„Éº„Ç∏', emoji: 'üìú', pattern: 'dots-pattern', titleStyle: 'font-mincho text-3xl', accentColor: '#8B6914', cornerDeco: 'vintage', bgExtra: 'bg-gradient-to-br' },
            { id: 11, name: '„Çµ„Ç§„Éê„Éº„Éë„É≥„ÇØ', emoji: 'üíæ', pattern: 'none', titleStyle: 'font-dot text-2xl tracking-widest', accentColor: '#00FF41', cornerDeco: 'cyber', bgExtra: 'bg-gradient-to-b' },
            { id: 12, name: '„Éê„Éñ„É´„Éù„ÉÉ„Éó', emoji: 'ü´ß', pattern: 'none', titleStyle: 'font-pop text-3xl', accentColor: '#FF8E53', cornerDeco: 'bubbles', bgExtra: 'bg-gradient-to-br' },
            { id: 13, name: '„Çπ„Éà„É™„Éº„Éà', emoji: 'üõπ', pattern: 'stripe-pattern', titleStyle: 'font-gothic font-black text-4xl', accentColor: '#FFD700', cornerDeco: 'street', bgExtra: 'bg-gradient-to-b' },
            { id: 14, name: '„Éï„É≠„Éº„É©„É´', emoji: 'üå∫', pattern: 'none', titleStyle: 'font-mincho text-3xl font-medium', accentColor: '#E91E63', cornerDeco: 'floral', bgExtra: 'bg-gradient-to-br' },
            { id: 15, name: '„Éü„Éã„Éû„É´ÁôΩ', emoji: '‚óªÔ∏è', pattern: 'none', titleStyle: 'font-gothic font-light text-3xl tracking-wider', accentColor: '#000000', cornerDeco: 'minimal', bgExtra: 'bg-white' },
            { id: 16, name: '„Ç∞„É™„ÉÉ„ÉÅ', emoji: 'üì∫', pattern: 'stripe-pattern', titleStyle: 'font-dot text-3xl', accentColor: '#FF0080', cornerDeco: 'glitch', bgExtra: 'bg-gradient-to-b' },
            { id: 17, name: '„Éà„É≠„Éî„Ç´„É´', emoji: 'üå¥', pattern: 'none', titleStyle: 'font-gothic font-bold text-3xl', accentColor: '#FF6D00', cornerDeco: 'tropical', bgExtra: 'bg-gradient-to-br' },
            { id: 18, name: '„Ç¥„Ç∑„ÉÉ„ÇØ„É≠„Éû„É≥', emoji: 'ü•Ä', pattern: 'none', titleStyle: 'font-mincho text-3xl font-bold', accentColor: '#8B0000', cornerDeco: 'gothic', bgExtra: 'bg-gradient-to-b' },
            { id: 19, name: '„Ç≠„É£„É≥„Éá„Ç£', emoji: 'üç¨', pattern: 'checkerboard', titleStyle: 'font-pop text-3xl', accentColor: '#FF1493', cornerDeco: 'candy', bgExtra: 'bg-gradient-to-br' },
            { id: 20, name: '„Ç¢„ÇØ„Ç¢„Éû„É™„É≥', emoji: 'üê¨', pattern: 'dots-pattern', titleStyle: 'font-gothic font-bold text-3xl', accentColor: '#00BCD4', cornerDeco: 'aqua', bgExtra: 'bg-gradient-to-br' },
            { id: 21, name: '„Ç™„Éº„É≠„É©', emoji: 'üåà', pattern: 'none', titleStyle: 'font-gothic font-bold text-3xl', accentColor: '#E040FB', cornerDeco: 'aurora', bgExtra: 'bg-gradient-to-br' },
            { id: 22, name: '„Çπ„ÉÅ„Éº„É†„Éë„É≥„ÇØ', emoji: '‚öôÔ∏è', pattern: 'stripe-pattern', titleStyle: 'font-mincho text-3xl font-bold', accentColor: '#CD7F32', cornerDeco: 'steam', bgExtra: 'bg-gradient-to-b' },
            { id: 23, name: '„Éï„Ç°„É≥„Ç∑„Éº', emoji: 'üíù', pattern: 'dots-pattern', titleStyle: 'font-pop text-3xl', accentColor: '#FF69B4', cornerDeco: 'fancy', bgExtra: 'bg-gradient-to-br' },
            { id: 24, name: '„Ç∑„É≥„Éó„É´Èªí', emoji: '‚óºÔ∏è', pattern: 'none', titleStyle: 'font-gothic font-black text-3xl', accentColor: '#FFFFFF', cornerDeco: 'minimal-dark', bgExtra: 'bg-black' }
        ];

        const designBgMap = {
            1: 'linear-gradient(135deg,#FFE0F0,#FFF5E0,#E0F0FF)', 2: 'linear-gradient(180deg,#0a0a2e,#1a1a4e,#0a0a2e)',
            3: 'linear-gradient(135deg,#1a1a2e,#2d1b69,#1a1a2e)', 4: 'linear-gradient(180deg,#f5f0e8,#e8dcc8)',
            5: 'linear-gradient(135deg,#ffffff,#f0f0f0)', 6: 'linear-gradient(135deg,#fce4f3,#e8d5f5,#d5e8f5)',
            7: 'linear-gradient(180deg,#1a1a1a,#2d2d2d)', 8: 'linear-gradient(135deg,#fff0f5,#ffe0eb)',
            9: 'linear-gradient(180deg,#0d0221,#150535,#1a0a3e)', 10: 'linear-gradient(135deg,#f5e6c8,#e8d5a8)',
            11: 'linear-gradient(180deg,#0a0a0a,#1a0a2e)', 12: 'linear-gradient(135deg,#fff0e0,#ffe0f0,#e0f0ff)',
            13: 'linear-gradient(180deg,#2d2d2d,#1a1a1a)', 14: 'linear-gradient(135deg,#fce4ec,#f8e0f0)',
            15: '#ffffff', 16: 'linear-gradient(180deg,#1a1a2e,#0a0a1e)',
            17: 'linear-gradient(135deg,#e0f7fa,#fff9c4,#fce4ec)', 18: 'linear-gradient(180deg,#1a0a1e,#2d1020)',
            19: 'linear-gradient(135deg,#fce4ec,#fff9c4,#e8f5e9)', 20: 'linear-gradient(135deg,#e0f7fa,#e0f2f1)',
            21: 'linear-gradient(135deg,#e8d5f5,#d5e8f5,#f5e6d5)', 22: 'linear-gradient(180deg,#3e2723,#4e342e)',
            23: 'linear-gradient(135deg,#fce4f3,#fff0f5)', 24: '#111111'
        };

        const getDesignDecoStyle = (designId) => {
            const s = { position: 'absolute', pointerEvents: 'none' };
            switch (designId) {
                case 1: return { ...s, top: 0, left: 0, right: 0, bottom: 0, background: 'radial-gradient(circle at 10% 10%,rgba(255,107,157,.3) 0%,transparent 40%),radial-gradient(circle at 90% 90%,rgba(255,200,55,.3) 0%,transparent 40%)' };
                case 2: return { ...s, top: 0, left: 0, right: 0, bottom: 0, boxShadow: 'inset 0 0 60px rgba(0,229,255,.15)', border: '2px solid rgba(0,229,255,.3)' };
                case 9: return { ...s, top: 0, left: 0, right: 0, bottom: 0, background: 'radial-gradient(ellipse at 30% 20%,rgba(124,77,255,.2),transparent 50%),radial-gradient(ellipse at 70% 80%,rgba(224,64,251,.2),transparent 50%)' };
                case 11: return { ...s, top: 0, left: 0, right: 0, bottom: 0, boxShadow: 'inset 0 0 40px rgba(0,255,65,.1)', border: '1px solid rgba(0,255,65,.3)' };
                case 16: return { ...s, top: 0, left: 0, right: 0, bottom: 0, background: 'repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,0,128,.03) 2px,rgba(255,0,128,.03) 4px)' };
                case 21: return { ...s, top: 0, left: 0, right: 0, bottom: 0, background: 'linear-gradient(135deg,rgba(224,64,251,.1),rgba(0,188,212,.1),rgba(255,109,0,.1))' };
                default: return { ...s, display: 'none' };
            }
        };

        function App() {
            const [charId, setCharId] = useState(12);
            const [designId, setDesignId] = useState(1);
            const [title, setTitle] = useState('');
            const [catchcopy, setCatchcopy] = useState('');
            const [point1, setPoint1] = useState('');
            const [point2, setPoint2] = useState('');
            const [point3, setPoint3] = useState('');
            const [quote, setQuote] = useState('');
            const [url, setUrl] = useState('');
            const [copied, setCopied] = useState(false);
            const [saving, setSaving] = useState(false);
            const [step, setStep] = useState(1);
            const canvasRef = useRef(null);
            const qrRef = useRef(null);

            const char = CHARACTERS.find(c => c.id === charId) || CHARACTERS[0];
            const design = DESIGNS.find(d => d.id === designId) || DESIGNS[0];
            const displayQuote = quote || char.defaultQuote;
            const displayTitle = title || '„ÅÇ„Å™„Åü„ÅÆ‰ΩúÂìÅ„Çø„Ç§„Éà„É´';
            const displayCatch = catchcopy || '„Åì„Åì„Å´„Ç≠„É£„ÉÉ„ÉÅ„Ç≥„Éî„Éº„ÅåÂÖ•„Çä„Åæ„Åô';
            const charImg = `../assets/magical_editor/char_${charId}.svg`;

            // Dynamic font sizing based on text length - larger for book format
            const titleFontSize = displayTitle.length > 20 ? '24px' : displayTitle.length > 12 ? '30px' : '36px';
            const catchFontSize = displayCatch.length > 30 ? '16px' : displayCatch.length > 18 ? '20px' : '24px';
            const quoteFontSize = displayQuote.length > 30 ? '12px' : '14px';

            useEffect(() => {
                if (!qrRef.current) return;
                qrRef.current.innerHTML = '';
                if (url) {
                    try { new QRCode(qrRef.current, { text: url, width: 50, height: 50, colorDark: '#000', colorLight: '#ffffff', correctLevel: QRCode.CorrectLevel.M }); } catch (e) { }
                }
            }, [url]);

            const handleSave = useCallback(async () => {
                if (!canvasRef.current || saving) return;
                setSaving(true);
                try {
                    const c = await html2canvas(canvasRef.current, { scale: 2, useCORS: true, backgroundColor: null, width: 420, height: 600 });
                    const link = document.createElement('a');
                    link.download = `magical_editor_${Date.now()}.png`;
                    link.href = c.toDataURL('image/png');
                    link.click();
                } catch (e) { alert('ÁîªÂÉè„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ' + e.message); }
                setSaving(false);
            }, [saving]);

            const tweetText = `${char.tweet}\n\nüìï„Äé${title || '‰ΩúÂìÅ„Çø„Ç§„Éà„É´'}„Äè\n${catchcopy ? '‚ú®' + catchcopy + '\n' : ''}${url ? 'üîó' + url + '\n' : ''}${char.tags} #„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ`;

            const handleCopyTweet = () => {
                navigator.clipboard.writeText(tweetText).then(() => { setCopied(true); setTimeout(() => setCopied(false), 2000); });
            };

            const isDark = [2, 3, 7, 9, 11, 13, 16, 18, 22, 24].includes(designId);
            const textColor = isDark ? '#fff' : '#000';
            const bookBg = isDark ? 'rgba(255,255,255,0.12)' : 'rgba(255,255,255,0.92)';
            const bookBorder = isDark ? `2px solid ${design.accentColor}` : '2px solid rgba(0,0,0,0.15)';
            const bookSpineColor = design.accentColor;
            const fontFamily = design.titleStyle.includes('font-mincho') ? '"Shippori Mincho",serif' : design.titleStyle.includes('font-dot') ? '"DotGothic16",sans-serif' : design.titleStyle.includes('font-pop') ? '"Hachi Maru Pop",cursive' : '"Noto Sans JP",sans-serif';

            const points = [point1, point2, point3].filter(Boolean);

            return (
                <main className="min-h-screen">
                    <header className="subpage-header"><div className="container">
                        <h1 className="subpage-title" style={{ fontFamily: '"DotGothic16",sans-serif' }}>
                            <span className="sparkle-anim inline-block mr-2">üßô‚Äç‚ôÄÔ∏è</span>„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ
                            <span className="block text-lg mt-2 font-gothic font-normal opacity-70">Â∞èË™¨ÂÆ£‰ºù„Éù„ÉÉ„Éó„É°„Éº„Ç´„Éº</span>
                        </h1>
                        <p className="mt-2 font-gothic opacity-60 text-sm">24‰∫∫„ÅÆÁ∑®ÈõÜËÄÖ„Ç≠„É£„É© √ó 24Á®Æ„ÅÆ„Éá„Ç∂„Ç§„É≥„Åß„ÄÅ„ÅÇ„Å™„Åü„ÅÆÂ∞èË™¨„ÅÆÂÆ£‰ºùÁîªÂÉè„ÇíÁàÜÈÄüÁîüÊàêÔºÅ</p>
                    </div></header>

                    <section className="section pb-20" style={{ paddingTop: 0 }}>
                        <div className="container">
                            <div className="flex flex-col xl:flex-row gap-8 items-start">

                                {/* Preview */}
                                <div className="xl:sticky xl:top-24 flex flex-col items-center gap-4 w-full xl:w-auto">
                                    <div className="retro-border rounded-lg p-3 bg-white" style={{ display: 'inline-block' }}>
                                        <div ref={canvasRef} className="canvas-wrapper" style={{ background: designBgMap[designId] || '#fff', color: textColor, fontFamily: '"Noto Sans JP",sans-serif', position: 'relative', overflow: 'hidden', display: 'flex' }}>

                                            {/* Left spine */}
                                            <div style={{ width: '18px', minHeight: '100%', background: `linear-gradient(180deg, ${design.accentColor}, ${design.accentColor}dd)`, flexShrink: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', boxShadow: 'inset -3px 0 6px rgba(0,0,0,0.15)', position: 'relative', zIndex: 5 }}>
                                                <span style={{ writingMode: 'vertical-rl', fontSize: '9px', fontWeight: 900, color: isDark ? '#000' : '#fff', letterSpacing: '0.15em', whiteSpace: 'nowrap', fontFamily: '"Noto Sans JP",sans-serif' }}>„Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ</span>
                                            </div>

                                            {/* Book cover body */}
                                            <div style={{ flex: 1, position: 'relative', overflow: 'hidden' }}>
                                                {/* Pattern overlay */}
                                                {design.pattern !== 'none' && <div className={design.pattern} style={{ position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, zIndex: 1 }} />}
                                                <div style={{ ...getDesignDecoStyle(designId), zIndex: 1 }} />

                                                {/* Cover content */}
                                                <div style={{ position: 'relative', zIndex: 2, width: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>

                                                    {/* ===== COVER AREA (top ~60%) ===== */}
                                                    <div style={{ flex: 1, display: 'flex', flexDirection: 'column', justifyContent: 'center', padding: '28px 24px 16px 24px' }}>
                                                        {/* Points as small tags at top */}
                                                        {points.length > 0 && (
                                                            <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap', marginBottom: '14px' }}>
                                                                {points.map((p, i) => (
                                                                    <span key={i} style={{ background: isDark ? 'rgba(255,255,255,.12)' : 'rgba(0,0,0,.05)', padding: '3px 10px', borderRadius: '4px', fontSize: '11px', fontWeight: 700, border: `1px solid ${isDark ? 'rgba(255,255,255,.15)' : 'rgba(0,0,0,.08)'}` }}>‚≠ê {p}</span>
                                                                ))}
                                                            </div>
                                                        )}

                                                        {/* Title - large, prominent */}
                                                        <div style={{ fontWeight: 900, fontSize: titleFontSize, lineHeight: 1.35, fontFamily: fontFamily, wordBreak: 'break-word', marginBottom: '12px' }}>
                                                            {displayTitle}
                                                        </div>

                                                        {/* Decorative line */}
                                                        <div style={{ width: '60px', height: '3px', background: design.accentColor, marginBottom: '12px', borderRadius: '2px' }} />

                                                        {/* Catchcopy */}
                                                        <div style={{ fontSize: catchFontSize, fontWeight: 500, lineHeight: 1.5, fontFamily: fontFamily, wordBreak: 'break-word', opacity: 0.8 }}>
                                                            {displayCatch}
                                                        </div>
                                                    </div>

                                                    {/* ===== OBI / Â∏Ø (bottom ~40%) ===== */}
                                                    <div style={{ background: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(255,255,255,0.88)', backdropFilter: 'blur(6px)', borderTop: `3px solid ${design.accentColor}`, borderBottom: `2px solid ${design.accentColor}`, padding: '14px 18px 12px 18px', position: 'relative' }}>
                                                        {/* Logo badge */}
                                                        <div style={{ position: 'absolute', top: '-14px', right: '16px', background: design.accentColor, color: isDark ? '#000' : '#fff', padding: '3px 12px', borderRadius: '4px', fontSize: '10px', fontWeight: 900, letterSpacing: '0.08em', fontFamily: '"DotGothic16",sans-serif', boxShadow: '2px 2px 0 rgba(0,0,0,.2)' }}>
                                                            üßô‚Äç‚ôÄÔ∏è „Éû„Ç∏„Ç´„É´Á∑®ÈõÜËÄÖ
                                                        </div>

                                                        {/* Character recommendation line */}
                                                        <div style={{ fontSize: '13px', fontWeight: 900, color: design.accentColor, marginBottom: '8px', fontFamily: '"Noto Sans JP",sans-serif' }}>
                                                            {char.emoji} {char.name}„ÅÆÊé®Ëñ¶
                                                        </div>

                                                        {/* Quote + character row */}
                                                        <div style={{ display: 'flex', alignItems: 'flex-end', gap: '10px' }}>
                                                            {/* Speech bubble */}
                                                            <div style={{ flex: 1, fontSize: quoteFontSize, fontWeight: 600, lineHeight: 1.5, wordBreak: 'break-word', color: isDark ? '#fff' : '#333' }}>
                                                                „Äå{displayQuote}„Äç
                                                            </div>
                                                            {/* Character image */}
                                                            <img src={charImg} alt={char.name} crossOrigin="anonymous" style={{ width: '70px', height: '98px', objectFit: 'contain', flexShrink: 0 }} />
                                                        </div>

                                                        {/* QR + URL row */}
                                                        {url && (
                                                            <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginTop: '8px', borderTop: `1px solid ${isDark ? 'rgba(255,255,255,.1)' : 'rgba(0,0,0,.06)'}`, paddingTop: '8px' }}>
                                                                <div ref={qrRef} style={{ width: 50, height: 50, background: '#fff', borderRadius: '4px', padding: '2px', flexShrink: 0, border: '1px solid rgba(0,0,0,0.08)' }} />
                                                                <span style={{ fontSize: '9px', opacity: .5, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{url}</span>
                                                            </div>
                                                        )}
                                                        {!url && <div ref={qrRef} style={{ display: 'none' }} />}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Save button */}
                                    <button onClick={handleSave} disabled={saving} className="retro-btn w-full" style={{ background: '#FF6B9D', color: '#fff', fontSize: '16px' }}>
                                        {saving ? '‚è≥ ‰øùÂ≠ò‰∏≠...' : 'üíæ ÁîªÂÉè„Çí‰øùÂ≠òÔºàPNGÔºâ'}
                                    </button>
                                </div>

                                {/* Controls */}
                                <div className="flex-1 space-y-6 w-full min-w-0">

                                    {/* Step tabs */}
                                    <div className="flex gap-2 flex-wrap">
                                        {[{ n: 1, label: 'üë§ „Ç≠„É£„É©ÈÅ∏Êäû' }, { n: 2, label: 'üé® „Éá„Ç∂„Ç§„É≥ÈÅ∏Êäû' }, { n: 3, label: '‚úèÔ∏è ÊÉÖÂ†±ÂÖ•Âäõ' }, { n: 4, label: 'üì§ Âá∫Âäõ' }].map(s => (
                                            <button key={s.n} onClick={() => setStep(s.n)} className={`retro-btn text-sm ${step === s.n ? '' : 'opacity-60'}`}
                                                style={{ background: step === s.n ? '#FFC837' : '#fff', fontWeight: step === s.n ? 900 : 500 }}>{s.label}</button>
                                        ))}
                                    </div>

                                    {/* Step 1: Characters */}
                                    {step === 1 && (<div className="retro-border rounded-lg p-6 bg-white/90">
                                        <div className="flex items-center gap-3 mb-4"><span className="step-badge">STEP 1</span><h3 className="font-gothic font-bold text-lg">ÊãÖÂΩìÁ∑®ÈõÜËÄÖ„ÇíÈÅ∏„Å∂</h3></div>
                                        <div className="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3">
                                            {CHARACTERS.map(c => (
                                                <div key={c.id} onClick={() => setCharId(c.id)} className={`char-card ${charId === c.id ? 'selected' : ''} bg-white`}>
                                                    <div className="text-3xl mb-1">{c.emoji}</div>
                                                    <div className="text-xs font-bold font-gothic leading-tight">{c.name}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>)}

                                    {/* Step 2: Designs */}
                                    {step === 2 && (<div className="retro-border rounded-lg p-6 bg-white/90">
                                        <div className="flex items-center gap-3 mb-4"><span className="step-badge">STEP 2</span><h3 className="font-gothic font-bold text-lg">„Éá„Ç∂„Ç§„É≥„ÇíÈÅ∏„Å∂</h3></div>
                                        <div className="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3">
                                            {DESIGNS.map(d => (
                                                <div key={d.id} onClick={() => setDesignId(d.id)} className={`design-card ${designId === d.id ? 'selected' : ''} bg-white`}>
                                                    <div className="text-2xl mb-1">{d.emoji}</div>
                                                    <div className="text-xs font-bold font-gothic leading-tight">{d.name}</div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>)}

                                    {/* Step 3: Form */}
                                    {step === 3 && (<div className="retro-border rounded-lg p-6 bg-white/90">
                                        <div className="flex items-center gap-3 mb-4"><span className="step-badge">STEP 3</span><h3 className="font-gothic font-bold text-lg">‰ΩúÂìÅÊÉÖÂ†±„ÇíÂÖ•Âäõ</h3></div>
                                        <div className="space-y-4">
                                            <div><label className="text-sm font-bold font-gothic block mb-1">üìï ‰ΩúÂìÅ„Çø„Ç§„Éà„É´</label><input className="retro-input" value={title} onChange={e => setTitle(e.target.value)} placeholder="„ÅÇ„Å™„Åü„ÅÆ‰ΩúÂìÅ„Çø„Ç§„Éà„É´" /></div>
                                            <div><label className="text-sm font-bold font-gothic block mb-1">‚ú® „Ç≠„É£„ÉÉ„ÉÅ„Ç≥„Éî„Éº</label><input className="retro-input" value={catchcopy} onChange={e => setCatchcopy(e.target.value)} placeholder="ÂøÉ„ÇíÊé¥„ÇÄ‰∏ÄË®ÄÔºÅ" /></div>
                                            <div className="grid grid-cols-1 sm:grid-cols-3 gap-3">
                                                <div><label className="text-sm font-bold font-gothic block mb-1">‚≠ê Êé®„Åó„Éù„Ç§„É≥„Éà1</label><input className="retro-input" value={point1} onChange={e => setPoint1(e.target.value)} placeholder="‰æã: Ê≥£„Åë„Çã" /></div>
                                                <div><label className="text-sm font-bold font-gothic block mb-1">‚≠ê Êé®„Åó„Éù„Ç§„É≥„Éà2</label><input className="retro-input" value={point2} onChange={e => setPoint2(e.target.value)} placeholder="‰æã: ËÉ∏„Ç≠„É•„É≥" /></div>
                                                <div><label className="text-sm font-bold font-gothic block mb-1">‚≠ê Êé®„Åó„Éù„Ç§„É≥„Éà3</label><input className="retro-input" value={point3} onChange={e => setPoint3(e.target.value)} placeholder="‰æã: ‰∏ÄÊ∞óË™≠„Åø" /></div>
                                            </div>
                                            <div><label className="text-sm font-bold font-gothic block mb-1">üí¨ „Ç≠„É£„É©„ÅÆ„Çª„É™„ÉïÔºàÁ©∫Ê¨Ñ„Åß„Éá„Éï„Ç©„É´„ÉàÔºâ</label><input className="retro-input" value={quote} onChange={e => setQuote(e.target.value)} placeholder={char.defaultQuote} /></div>
                                            <div><label className="text-sm font-bold font-gothic block mb-1">üîó ‰ΩúÂìÅURLÔºàQR„Ç≥„Éº„ÉâÁîüÊàêÔºâ</label><input className="retro-input" type="url" value={url} onChange={e => setUrl(e.target.value)} placeholder="https://..." /></div>
                                        </div>
                                    </div>)}

                                    {/* Step 4: Output */}
                                    {step === 4 && (<div className="retro-border rounded-lg p-6 bg-white/90">
                                        <div className="flex items-center gap-3 mb-4"><span className="step-badge">STEP 4</span><h3 className="font-gothic font-bold text-lg">„ÉÑ„Ç§„Éº„ÉàÊñá</h3></div>
                                        <div className="retro-border rounded-lg p-4 bg-gray-50 mb-4">
                                            <pre className="whitespace-pre-wrap text-sm font-gothic leading-relaxed">{tweetText}</pre>
                                        </div>
                                        <div className="flex gap-3">
                                            <button onClick={handleCopyTweet} className="retro-btn flex-1" style={{ background: copied ? '#69F0AE' : '#00E5FF', color: '#000', fontSize: '14px' }}>
                                                {copied ? '‚úÖ „Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ' : 'üìã „ÉÑ„Ç§„Éº„ÉàÊñá„Çí„Ç≥„Éî„Éº'}
                                            </button>
                                            <button onClick={handleSave} disabled={saving} className="retro-btn flex-1" style={{ background: '#FF6B9D', color: '#fff', fontSize: '14px' }}>
                                                {saving ? '‚è≥ ‰øùÂ≠ò‰∏≠...' : 'üíæ ÁîªÂÉè„Çí‰øùÂ≠ò'}
                                            </button>
                                        </div>
                                    </div>)}

                                    {/* Current selection display */}
                                    <div className="retro-border rounded-lg p-4 bg-white/80 flex items-center gap-4 flex-wrap">
                                        <span className="text-sm font-gothic font-bold opacity-60">ÁèæÂú®„ÅÆË®≠ÂÆö:</span>
                                        <span className="text-sm font-gothic"><span className="text-2xl mr-1">{char.emoji}</span>{char.name}</span>
                                        <span className="text-sm font-gothic opacity-40">√ó</span>
                                        <span className="text-sm font-gothic"><span className="text-xl mr-1">{design.emoji}</span>{design.name}</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </section>
                </main>
            );
        }
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <footer class="footer">
        <div class="container">
            <div class="copyright">&copy; 2026 Yoshida Kagetica</div>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="../js/main.js"></script>
</body>

</html>